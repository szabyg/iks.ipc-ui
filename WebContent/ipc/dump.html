<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:xsd="http://www.w3.org/2001/XMLSchema#">
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<title>srfg data dumper</title>
<script src="js/loader.js" type="text/javascript"></script>
<script type="text/javascript">
    // setting directory variables
	var srcroot = "js/";
	var libroot = "js/lib/";
	var cssroot = "./css/";
	var rgraphroot = "js/lib/rgraph/";
	var withAloha = false;
 
	// loading rdfQuery and jQuery (v 1.4.3) script-files
	load_scripts([ 
				libroot + "jquery/1.4/jquery-1.4.3.js", // min.
				libroot + "jquery/1.4/jquery-ui-1.8.6.custom.js", // min.,
				libroot + "underscore-min.js",
				libroot + "backbone-min.js",
				srcroot + "iks.stanbolconnector.js",
				libroot + "json.min.js",
				]);
</script>
<script type="text/javascript">
	(function($) {
		$(document).ready(function(){
		    $.stanbolConnector.getSites(function(sites){
		        console.info(sites);
		        }, {
//		        stanbolUrl: "http://stanbol.iksfordrupal.net:9000/"
		    });
		    
            var site = "srfg";
            $.stanbolConnector.entityhubQuery(site, "", function( data ) {
                $('#result').html(data.length);
                _.each(data, function(item){
                    $('#result').append("<p>"+JSON.serialize(item)+"</p>");
                    $.stanbolConnector.getEntity("srfg", item.id.replace(" ", "%20"), function(fullItem){
                        $('#result').append("<p>"+JSON.serialize(fullItem)+"</p>");
                    });
                });
				console.info( $.map( data, function( item ) {
					return {
						label: item["http://www.w3.org/2000/01/rdf-schema#label"][0],
						value: item.id,
						item: item
					}
				}));
            }
            /*{constraints: [
                { 
                    "type": "reference", 
                    "field": "http:\/\/www.w3.org\/1999\/02\/22-rdf-syntax-ns#type", 
                    "value": "http:\/\/dbpedia.org\/ontology\/Person", 
//                    "value": $('#contentType').val(), 
                },
            ]}*/
            );
        });
    })(jQuery);
  	</script>
</head>
<body>
type: <input id="contentType" value="Project"/><button>dump!</button>
<h2>Result</h2>
<div id="result">nothing yet...</div>

</body>
</html>
